# Milestone: Plan Consolidado del Sistema HDS

**Context**: Planificación de sistema para generar Hojas de Seguridad de fertilizantes

**Date**: 2026-02-04 20:08

## The Discovery

Se ha completado la fase de planificación del Sistema de Hojas de Datos de Seguridad (HDS) para Calferquim. El sistema aprovecha que los productos terminados son mezclas físicas sin transformación química, por lo cual la HDS de un producto se deriva de la "suma" de las HDS de sus componentes según las reglas del Sistema Globalmente Armonizado (SGA/GHS).

### Elementos del Sistema

1. **Base de Datos Maestra (Excel)** con 5 hojas:
   - MP_SGA: Datos SGA de materias primas (frases H/P, pictogramas, propiedades)
   - Frases_HP: Catálogo de frases H y P con texto en español
   - Recetas: Formulaciones de productos terminados con componentes y porcentajes
   - Info_Corp: Datos corporativos (empresa, dirección, teléfonos)
   - Config: Textos estándar por sección para productos de bajo riesgo

2. **Motor de Generación (Python)**:
   - Scripts para leer base de datos y aplicar reglas de combinación GHS
   - Jinja2 para renderizar plantillas Markdown
   - Pandoc para convertir Markdown a Word/PDF

3. **Reglas de Combinación GHS**:
   - Frases H: unión de componentes ≥1% (CMR ≥0.1%)
   - Frases P: selección pertinentes (máx 6)
   - Pictogramas: máx 5, aplicar jerarquía
   - Palabra de señal: Peligro/Atención según severidad

4. **Documentos Generados**:
   - HDS Word/PDF (16 secciones SGA)
   - Etiquetas SGA (pictogramas + frases resumidas)
   - Tarjetas de emergencia (información portátil)

## Key Files Affected

- `/home/w182/w421/cfq_hds/plan_hds.md` - Documento de planificación completo (65KB)
- `/home/w182/w421/cfq_hds/logs/CURRENT_SESSION.md` - Estado actual del proyecto
- `/home/w182/w421/cfq_hds/red_hds/` - Directorio con recursos existentes
  - `sistema_hs.md` - Plan previo
  - `listado_mp_pt.csv` - Catálogo de productos/MP (~634 registros)
  - `listas.csv` - Recetas de productos terminados (~37 registros)
  - `guia_hds/` - Guías de 16 secciones SGA + frases H/P

## Productos de Alto Riesgo Identificados

| Producto | Clasificación Esperada | Prioridad |
|----------|----------------------|-----------|
| Sulfato de Zinc | H302, H315, H319, H410 | Alta |
| Ácido Bórico | H360FD | Alta |
| Sulfato de Cobre | H302, H315, H318, H410 | Media |
| Sulfato de Manganeso | H302, H315, H319 | Media |

## Configuración Determinada

- **Formato Base de Datos**: Excel (.xlsx) para mantenimiento por personal no técnico
- **Formato Salida**: Word (.docx) para edición + PDF para distribución
- **Idioma**: Español
- **Alcance**: Paquete completo (HDS + Etiquetas SGA + Tarjetas de emergencia)
- **Proceso**: Iterativo - piloto con 3-5 MP luego escalar

## Próximos Pasos

1. Crear repositorio GitHub
2. Implementar estructura de directorios
3. Crear archivo Excel base_hds.xlsx
4. Poblar catálogo de frases H/P
5. Procesar HDS piloto de materias primas
6. Desarrollar scripts Python
7. Generar plantillas Markdown
8. Validar con productos terminados
